name: nx
description: 'this action install nx & runs tests'

inputs:
  gitRef:
    required: true
    description: 'the git ref to checkout'

runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v2
      with:
        ref: ${{ inputs.gitRef }}

    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install nx
      shell: bash
      run: npm install -g nx

    - name: install nx & shared deps
      shell: bash
      run: npm install
